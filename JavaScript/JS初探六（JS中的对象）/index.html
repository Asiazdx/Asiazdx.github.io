<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #AFDBE3; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #AFDBE3, 0 0 5px     #AFDBE3; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #AFDBE3;    /*上边框颜色*/
        border-left-color: #AFDBE3;    /*左边框颜色*/
    }
</style>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScript初探," />










<meta name="keywords" content="JavaScript初探">
<meta property="og:type" content="article">
<meta property="og:title" content="JS初探六（JS中的对象）">
<meta property="og:url" content="http://www.github.com/Snowyzdx/JavaScript/JS初探六（JS中的对象）/index.html">
<meta property="og:site_name" content="Snowy&#39;blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://p6nfblqvu.bkt.clouddn.com/jsJichujsa06.png">
<meta property="og:updated_time" content="2018-05-01T12:22:06.001Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS初探六（JS中的对象）">
<meta name="twitter:image" content="http://p6nfblqvu.bkt.clouddn.com/jsJichujsa06.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  <link rel="canonical" href="http://www.github.com/Snowyzdx/JavaScript/JS初探六（JS中的对象）/"/>





  <title>JS初探六（JS中的对象） | Snowy'blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/Asiazdx"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Snowy's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Stay Hungry. Stay Foolish</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-comments">
          <a href="/comments/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heart"></i> <br />
            
            留言板
          </a>
        </li>
      
        
        <li class="menu-item menu-item-laboratory">
          <a href="/laboratory/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-code"></i> <br />
            
            实验室
          </a>
        </li>
      
        
        <li class="menu-item menu-item-other_note">
          <a href="/other_note/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            书影音
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.github.com/Snowyzdx/JavaScript/JS初探六（JS中的对象）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="稻香Snowy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/toux.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Snowy'blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">JS初探六（JS中的对象）</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-06T09:44:46+08:00">
                2016-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://p6nfblqvu.bkt.clouddn.com/jsJichujsa06.png" width="600" alt="jsa06"><br><a id="more"></a></p>
<h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><h3 id="1-生成方法"><a href="#1-生成方法" class="headerlink" title="1.生成方法"></a>1.生成方法</h3><p>对象是javascript语言的核心概念，也是最重要的数据类型。<br>什么是对象？简单说，对象就是一组“键值对”的集合，是一种无序复合数据集合。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  foo:<span class="string">'Hello'</span>,</span><br><span class="line">  bar:<span class="string">'World'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，大括号就定义了一个对象，它被赋值给变量obj，所以变量obj指向一个对象。该对象内部包含两个键值对（又称为两个“成员”）。    </p>
<h3 id="2-键名"><a href="#2-键名" class="headerlink" title="2.键名"></a>2.键名</h3><p>对象的所有键名都是字符串（ES6又引入了Symbol值也可以作为键值），所以加不加引号都可以。上面的代码也可以写成下面这样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  <span class="string">'foo'</span>:<span class="string">'Hello'</span>,</span><br><span class="line">  <span class="string">'bar'</span>:<span class="string">'World'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果键名是数值，会自动转为字符串。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    <span class="number">1</span>:<span class="string">'a'</span>,</span><br><span class="line">    <span class="number">3.2</span>:<span class="string">'b'</span>,</span><br><span class="line">    <span class="number">1e2</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="number">1e-2</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="number">.234</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="number">0xFF</span>:<span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'100'</span>]);<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj的所有键名虽然看上去像数值，实际上都被自动转成了字符串。<br>如果键名不符合标识名的条件（比如第一个字符为数字，或者含有空格或运算符），且也不是数字，则必须加上引号，否则会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    <span class="number">1</span>p:<span class="string">'Hello World'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不报错</span></span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    <span class="string">'1p'</span>:<span class="string">'Hello World'</span>,</span><br><span class="line">    <span class="string">'h w'</span>:<span class="string">'Hello World'</span>,</span><br><span class="line">    <span class="string">'p+q'</span>:<span class="string">'Hello World'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>上面对象的三个键名，都不符合表示名的条件，所以必须加上引号。<br>对象的每一个键名又称为“属性（property）”，它的“键值”可以是任何数据类型。如果一个属性的值为函数，通常把这个属性称为“方法”，它可以像函数那样调用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  p:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.p(<span class="number">1</span>);<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj的属性p，就指向一个函数。<br>如果属性的值还是一个对象，就形成了链式引用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1=&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> o2=&#123;<span class="attr">bar</span>:<span class="string">'hello'</span>&#125;;</span><br><span class="line">o1.foo=o2;</span><br><span class="line">o1.foo.bar;<span class="comment">//'hello'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象o1的属性foo指向对象o2，就可以链式引用o2的属性。对象的属性之间用逗号分隔，最后一个属性后面可以加逗号，也可以不加。<br>属性可以动态创建，不必在对象声明时就指定。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">obj.foo=<span class="number">123</span>;</span><br><span class="line">obj.foo;<span class="comment">//123</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-对象的引用"><a href="#3-对象的引用" class="headerlink" title="3.对象的引用"></a>3.对象的引用</h3><p>如果不同的变量名指向同一个对象，那么它们都是这个对象的引用，也就是说指向同一个内存地址。修改其中一个变量，会影响到其他所有变量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1=&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> o2=o1;</span><br><span class="line"></span><br><span class="line">o1.a=<span class="number">1</span>;</span><br><span class="line">o2.a;<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">o2.b=<span class="number">2</span>;</span><br><span class="line">o1.b;<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，o1和o2指向同一个对象，因此为其中任何一个变量添加属性，另一个变量都可以读写该属性。<br>此时，如果取消某个变量对原对象的引用，不会影响到另一个变量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1=&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> o2=o1;</span><br><span class="line"></span><br><span class="line">o1=<span class="number">1</span>;</span><br><span class="line">o2;<span class="comment">//&#123;&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>但是，这种引用只局限于对象，如果两个变量指向同一个原始类型的值，那么，变量这时都是值的拷贝。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> y=x;</span><br><span class="line">x=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(y);<span class="comment">//1</span></span><br></pre></td></tr></table></figure></p>
<p>上面的代码中，当x的值发生变化后，y的值并不变，这就表示y和x并不是指向同一个内存地址。    </p>
<h3 id="4-表达式还是语句？"><a href="#4-表达式还是语句？" class="headerlink" title="4.表达式还是语句？"></a>4.表达式还是语句？</h3><p>上面的代码中，当x的值发生变化后，y的值并不变，这就表示y和x并不是指向同一个内存地址。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">foo</span>:<span class="number">123</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>javascript引擎读到上面这行代码，会发现可能有两种含义。第一种可能是，一个表达式，表示一个包含foo属性的对象，第二种可能是，这是一个语句，表示一个代码区块，里面有一个标签foo，指向表达式123。<br>为了避免这种歧义，javascript规定，如果行首是大括号，一律解释为语句（即代码块）。如果要解释为表达式（即对象），必须在大括号前加上圆括号。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#123;<span class="attr">foo</span>:<span class="number">123</span>&#125;);</span><br></pre></td></tr></table></figure></p>
<p>这种差异在evel语句（作用是对字符串的求值）中反映得最明显。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">evel(<span class="string">'&#123;foo:123&#125;'</span>);<span class="comment">//123</span></span><br><span class="line">evel(<span class="string">'(&#123;foo:123&#125;)'</span>);<span class="comment">//&#123;foo:123&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，如果没有圆括号，evel将其理解为一个代码块；加上圆括号以后，就理解成一个对象。    </p>
<h2 id="二、属性操作"><a href="#二、属性操作" class="headerlink" title="二、属性操作"></a>二、属性操作</h2><h3 id="1-读取属性"><a href="#1-读取属性" class="headerlink" title="1.读取属性"></a>1.读取属性</h3><p>读取对象的属性，有两种方法，一种是使用点运算符，还有一种是使用方括号运算符。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  p:<span class="string">'Hello World'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj.p);<span class="comment">//'Hello World'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'p'</span>]);<span class="comment">//'Hello World'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码分别采用点运算符和方括号运算符，读取属性p。<br>请注意，如个使用方括号运算符，键名必须放在引号里面，否则被当做变量处理。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo=<span class="string">'bar'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  foo:<span class="number">1</span>,</span><br><span class="line">  bar:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj.foo);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[foo]);<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，引用对象obj的foo属性时，如果使用点运算符，foo就是字符串；如果使用方括号运算符，但是不使用引号，那么foo就是一个变量，指向字符串bar。<br>方括号运算符内部还可以使用表达式。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj[<span class="string">'hello'</span>+<span class="string">'world'</span>]</span><br><span class="line">obj[<span class="number">3</span>+<span class="number">3</span>];</span><br></pre></td></tr></table></figure></p>
<p>数字键可以不用引号，因为会自动转成字符串。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  <span class="number">0.7</span>:<span class="string">'Hello World'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'0.7'</span>]);<span class="comment">//'Hell World'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="number">0.7</span>]);<span class="comment">//'Hello World'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj的数字键0.7,加不加引号都可以，因为会被自动转为字符串。     </p>
<p>注意，数值键名不能使用点运算符（因为会被当成小数点），只能使用方括号运算符。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  <span class="number">123</span>:<span class="string">'hello world'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj<span class="number">.123</span>);<span class="comment">//报错</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="number">123</span>]);<span class="comment">//'hello world'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码的第一个表达式，对数值键名123使用点运算符，结果报错。第二个表达式使用方括号运算符，结果就是正确的。    </p>
<h3 id="2-属性的赋值"><a href="#2-属性的赋值" class="headerlink" title="2. 属性的赋值"></a>2. 属性的赋值</h3><p>点运算符和方括号运算符，不仅可以用来读取值，还可以用来赋值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo=<span class="string">'hello'</span>;</span><br><span class="line">obj[<span class="string">'bar'</span>]=<span class="string">'world'</span></span><br></pre></td></tr></table></figure></p>
<p>javascript允许属性的“后绑定”，也就是说，你可以在任意时刻新增属性；没有必要在在定义对象的时候，就定义好属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">p</span>:<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">obj.p=<span class="number">1</span>&#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-查看所有属性"><a href="#3-查看所有属性" class="headerlink" title="3.查看所有属性"></a>3.查看所有属性</h3><p>查看一个对象本身的所有属性，可以使用Object.keys方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  key1:<span class="number">1</span>,</span><br><span class="line">  key:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(obj);</span><br><span class="line"><span class="comment">//['key1','key2']</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-delete命令"><a href="#4-delete命令" class="headerlink" title="4. delete命令"></a>4. delete命令</h3><p>delete命令用于删除对象的属性，删除成功后返回true。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">p</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(obj);<span class="comment">//['p']</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> obj.p;<span class="comment">//true</span></span><br><span class="line">obj.p;<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">Object</span>.keys(obj);<span class="comment">//[]</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，delete命名删除对象obj的p属性。删除后，再读取p属性就会返回undefined，而且Object.keys方法的返回值也不再包括该属性。<br>注意，删除一个不存在的属性，delete不报错，而且返回true。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"><span class="keyword">delete</span> obj.p;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj并没有p属性，但是delete命令照样返回true。<br>因此，不能根据delete命令的结果，认定某个属性是存在的。<br>只有一种情况，delete命名返回false，那就是该属性存在，且不得删除。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=<span class="built_in">Object</span>.defineProperty(&#123;&#125;,<span class="string">'p'</span>,&#123;</span><br><span class="line">  value:<span class="number">123</span>,</span><br><span class="line">  configurable:<span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line">obj.p;<span class="comment">//123</span></span><br><span class="line"><span class="keyword">delete</span> obj.p;<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对obj的p属性是不能删除的，所以delete命令返回false。<br>另外，需要注意的是，delete命令只能删除对象的属性，无法删除继承的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"><span class="keyword">delete</span> obj.toString;<span class="comment">//true</span></span><br><span class="line">obj.toString;<span class="comment">//function toString()&#123;//...&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，toString是对象obj继承的属性，虽然delete命令返回true，但该属性并没有删除，依然存在。这个例子还说明，即使delete返回true，该属性依然可能读取到值。    </p>
<h3 id="5-in运算符"><a href="#5-in运算符" class="headerlink" title="5.in运算符"></a>5.in运算符</h3><p>in运算符用于检查对象是否包含某个属性（注意，检查的是键名，不是键值），如果包含就返回true，否则返回false。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">p</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="string">'p'</span> <span class="keyword">in</span> obj;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>in运算符的一个问题是，它不能识别哪些属性是对象自身的，哪些属性是继承的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"><span class="string">'toString'</span> <span class="keyword">in</span> o;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，toString方法不是对象obj自身属性，而是继承的属性。但是，in运算符不能识别，对继承的属性也返回true。    </p>
<h3 id="6-for…in循环"><a href="#6-for…in循环" class="headerlink" title="6.for…in循环"></a>6.for…in循环</h3><p>for…in循环用来遍历一个对象的全部属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(obj[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>下面是一个使用for…in循环，提取对象属性名的例子。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  x:<span class="number">1</span>,</span><br><span class="line">  y:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> props=[];</span><br><span class="line"><span class="keyword">var</span> i=<span class="number">0</span>;   </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    props[i++]=p;</span><br><span class="line">&#125;</span><br><span class="line">consoel.log(props);</span><br></pre></td></tr></table></figure></p>
<p>for…in循环有两个使用注意点。   </p>
<ul>
<li>它遍历的是对象所有可遍历（enumberable）的属性，会跳过不可遍历的属性。</li>
<li>它不仅遍历对象自身的属性，还遍历继承属性。<br>举例来说，对象继承了toString属性，但是for…in循环不会遍历到这个属性。   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"><span class="comment">//toString属性是存在的</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//没有任何输出</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>示例中，对象obj继承了toString属性，该属性不会被for…in循环遍历到，因为它默认是“不可遍历”的。<br>如果继承的属性是可遍历的，那么就会被for…in循环遍历到。但是，一般情况下，都是只想遍历自身的属性，所以使用for…in的时候，应结合使用hasOwnProperty方法，在循环内部判断一下，某个属性是否为对象自身的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;<span class="attr">name</span>:<span class="string">'张'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> person)&#123;</span><br><span class="line">  <span class="keyword">if</span>(person.hasOwnProperty(key))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="三、对象结合width语句的应用"><a href="#三、对象结合width语句的应用" class="headerlink" title="三、对象结合width语句的应用"></a>三、对象结合width语句的应用</h2><p>width语句的格式如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">width(对象)&#123;</span><br><span class="line">    语句;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>它的作用是操作同一个对象的对个属性时，提供一些书写的方便。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例一</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    p1:<span class="number">1</span>,</span><br><span class="line">    p2:<span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line">width(obj)&#123;</span><br><span class="line">    p1=<span class="number">4</span>;</span><br><span class="line">    p2=<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line">obj.p1=<span class="number">4</span>;</span><br><span class="line">obj.p2=<span class="number">5</span>;</span><br><span class="line"><span class="comment">//例二</span></span><br><span class="line">width(<span class="built_in">document</span>.links[<span class="number">0</span>])&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(href);</span><br><span class="line">    <span class="built_in">console</span>.log(title);</span><br><span class="line">    <span class="built_in">console</span>.log(style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.links[<span class="number">0</span>].href);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.links[<span class="number">0</span>].title);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.links[<span class="number">0</span>].style);</span><br></pre></td></tr></table></figure></p>
<p>注意，如果width区块内部有变量的赋值操作，必须是当前对象已经存在的属性，否则会创造一个当前作用域的全局变量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">width(obj)&#123;</span><br><span class="line">    p1=<span class="number">4</span>;</span><br><span class="line">    p2=<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.p1);<span class="comment">//undefiend</span></span><br><span class="line"><span class="built_in">console</span>.log(p1);<span class="comment">//4</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj并没有p1属性，对p1赋值等于创造了一个全局变量p1.正确的写法应该是，先定义obj的属性p1，然后在width区块内操作它。<br>这是因为width区块没有改变作用域，它的内部依然是当前作用域。这造成了width语句的一个很大的弊病，就是绑定对象不明确。<br>所以建议不要使用width语句，可以考虑用一个临时变量代替width。    </p>
<hr>
<h1 id="标准库（Object）"><a href="#标准库（Object）" class="headerlink" title="标准库（Object）"></a>标准库（Object）</h1><h2 id="一、概述-1"><a href="#一、概述-1" class="headerlink" title="一、概述"></a>一、概述</h2><p>javascript原生提供Object对象，所有其他对象都继承自这个对象。Object本身也是一个构造函数，可以直接通过它来生成新对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure></p>
<p>Object作为构造函数使用时，可以接受一个参数。如果该参数是一个对象，则直接返回这个对象；如果是一个原始类型的值，则返回该值对应的包装对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> o2=<span class="keyword">new</span> <span class="built_in">Object</span>(o1);</span><br><span class="line">o1===o2;<span class="comment">//true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Object</span>(<span class="number">123</span>) <span class="keyword">instanceof</span> <span class="built_in">Number</span></span><br><span class="line"><span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>注意，通过new Object()的写法生成新对象，与字面量的写法o={}是等价的。<br>与其他构造函数一样，如果要在Object对象上部署一个方法，有两种做法。     </p>
<h3 id="1-部署在Object对象本身"><a href="#1-部署在Object对象本身" class="headerlink" title="1.部署在Object对象本身"></a>1.部署在Object对象本身</h3><p>比如，在Object对象上面定义一个print方法，显示其他对象的内容。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.print=<span class="function"><span class="keyword">function</span>(<span class="params">o</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="built_in">Object</span>.print(o);</span><br><span class="line"><span class="comment">//Object</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-部署在Object-prototype对象"><a href="#2-部署在Object-prototype对象" class="headerlink" title="2. 部署在Object.prototype对象"></a>2. 部署在Object.prototype对象</h3><p>所有的构造函数都有一个prototype属性，指向一个原型对象，凡是定义在Object.prototype对象上面的属性和方法，将被所有实例对象共享。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.print=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o.print();<span class="comment">//Object</span></span><br></pre></td></tr></table></figure></p>
<p>可以看到，尽管上面两种写法的print方法功能相同，但是用法是不一样的，因此必须区分“构造函数的方法”和“实例对象的方法”。     </p>
<h2 id="二、Object"><a href="#二、Object" class="headerlink" title="二、Object()"></a>二、Object()</h2><p>Object本身当做工具方法使用时，可以将任意值转为对象。这个方法常用于保证某个值一定是对象。<br>如果参数是原始类型的值，Object方法返回对应的包装对象的实例。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>();<span class="comment">//返回一个空对象</span></span><br><span class="line"><span class="built_in">Object</span>() <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">undefined</span>);<span class="comment">//返回一个空对象</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">undefined</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">null</span>);<span class="comment">///返回一个空对象</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">null</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>(<span class="number">1</span>);<span class="comment">//等同于 new Number(1)</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">Number</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>(<span class="string">'foo'</span>);<span class="comment">//等同于new String('foo');</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="string">'foo'</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="string">'foo'</span>) <span class="keyword">instanceof</span> <span class="built_in">String</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">true</span>) <span class="comment">// 等同于 new Boolean(true)</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">true</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="literal">true</span>) <span class="keyword">instanceof</span> <span class="built_in">Boolean</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码表示Object函数可以将各种值转为对应的构造函数生成对象。<br>如果Object方法的参数是一个对象，它总是返回原对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[];</span><br><span class="line"><span class="built_in">Object</span>(arr);<span class="comment">//返回原数组</span></span><br><span class="line"><span class="built_in">Object</span>(arr)===arr;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>(obj);<span class="comment">//返回原对象</span></span><br><span class="line"><span class="built_in">Object</span>(obj)===obj;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>(fn);<span class="comment">//返回原函数</span></span><br><span class="line"><span class="built_in">Object</span>(fn)===fn;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>利用这一点，可以写一个判断变量是否为对象的函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value===<span class="built_in">Object</span>(value);</span><br><span class="line">&#125;</span><br><span class="line">isObject([]);<span class="comment">//true</span></span><br><span class="line">isObject(<span class="literal">true</span>);<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<h2 id="三、Object对象的静态方法"><a href="#三、Object对象的静态方法" class="headerlink" title="三、Object对象的静态方法"></a>三、Object对象的静态方法</h2><p>所谓的“静态方法”，是指部署在Object对象自身的方法。    </p>
<h3 id="1-Object-keys-Object-getOwnPropertyNames"><a href="#1-Object-keys-Object-getOwnPropertyNames" class="headerlink" title="1.Object.keys(),Object.getOwnPropertyNames()"></a>1.Object.keys(),Object.getOwnPropertyNames()</h3><p>Object.keys方法和Object.getOwnPropertyNames方法很相似，一般用来遍历对象的属性。它们的参数都是一个对象，都返回一个数组，该数组的成员都是自身的（而不是继承的）所有属性名。它们的区别在于，Object.keys方法只返回可枚举的属性，Object.getOwnPropertyNames方法还返回不可枚举的属性名。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=&#123;</span><br><span class="line">    p1:<span class="number">123</span>,</span><br><span class="line">    p2:<span class="number">456</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(o)</span><br><span class="line"><span class="comment">//['p1','p2']</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(o)</span><br><span class="line"><span class="comment">//['p1','p2']</span></span><br></pre></td></tr></table></figure></p>
<p>上面的代码表示，对于一般的对象来说，这两个方法返回的结果是一样的。只有涉及不可枚举的属性时，才会有不一样的结果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=[<span class="string">'hello'</span>,<span class="string">'world'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(a);</span><br><span class="line"><span class="comment">//['0','1']</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(a);</span><br><span class="line"><span class="comment">//['0','1','length']</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，数组的length属性是不可枚举的属性，所以只出现在Object.getOwnPropertyNames方法返回结果中。<br>由于javascript没有提供计算对象属性个数的方法，所以可以用这个方法代替。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(o).length;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(o).length;</span><br></pre></td></tr></table></figure></p>
<p>一般情况下，几乎总是使用Object.keys方法，遍历数组的属性。   </p>
<h3 id="2-其他方法"><a href="#2-其他方法" class="headerlink" title="2.其他方法"></a>2.其他方法</h3><p>除了上面提到的方法，Object还有不少其他方法。   </p>
<h4 id="（1）、对象属性模型的相关方法"><a href="#（1）、对象属性模型的相关方法" class="headerlink" title="（1）、对象属性模型的相关方法"></a>（1）、对象属性模型的相关方法</h4><ul>
<li>Object.getOwnPropertyDescriptor():获取某个属性的attributes对象。</li>
<li>Object.defineProperty():通过attributes对象，定义某个属性。</li>
<li>Object.defineProperties():通过attributes对象，定义多个属性。</li>
<li>Object.getOwnPropertyNames():返回直接定义在某个对象上面的全部属性名<h4 id="（2）、控制对象状态的方法"><a href="#（2）、控制对象状态的方法" class="headerlink" title="（2）、控制对象状态的方法"></a>（2）、控制对象状态的方法</h4></li>
<li>Object.preventExtensions():防止对象扩展</li>
<li>Object.isExtensible()：判断对象是否可扩展</li>
<li>Object.seal()：禁止对象配置</li>
<li>Object.isSealed():判断一个对象是否可配置</li>
<li>Objct.freeze():冻结一个对象</li>
<li>Object.isFrozen():判断一个对象是否被冻结<h4 id="（3）、原型相关方法"><a href="#（3）、原型相关方法" class="headerlink" title="（3）、原型相关方法"></a>（3）、原型相关方法</h4></li>
<li>Object.create():该方法可以指定原型对象和属性，返回一个新的对象。</li>
<li>Object.getPropertyOf():获取对象的Property对象</li>
</ul>
<h2 id="四、Object对象的实例方法"><a href="#四、Object对象的实例方法" class="headerlink" title="四、Object对象的实例方法"></a>四、Object对象的实例方法</h2><p>除了Object对象本身的方法，还有不少方法是部署在Object.prototype对象上的，所以Object的实例对象都继承了这些方法。<br>Object实例对象的方法，主要有以下6个。   </p>
<ol>
<li>valueOf():返回当前对象对应的值。</li>
<li>toString():返回当前对象对应的字符串形式</li>
<li>toLocaleString():返回当前对象对应的本地字符串形式。</li>
<li>hasOwnProperty():判断某个属性是否为当前对象自身的属性，还是继承自原型对象的属性。</li>
<li>isPrototypeOf():判断当前对象是否是另一个对象的原型。</li>
<li>propertyIsEnumberable():判断某个属性是否可枚举。</li>
</ol>
<h3 id="1-Object-prototype-valueOf"><a href="#1-Object-prototype-valueOf" class="headerlink" title="1.Object.prototype.valueOf()"></a>1.Object.prototype.valueOf()</h3><p>valueOf方法的作用是返回一个对象的“值”，默认情况下返回对象本身。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o.valueOf()===o;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码比较o.valueOf()与o本身，两者是一样的。<br>valueOf方法的主要用途是，javascript自动类型转换时会默认调用这个方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>+o);<span class="comment">//'1[object Object]'</span></span><br></pre></td></tr></table></figure></p>
<p>上面的代码将对象o与数字1相加，这时javascript就会自动调用valueOf()方法。所以，如果自定义valueOf方法，就可以得到想要的结果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o.valueOf=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>+o);<span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码自定义了o对象的valueOf方法，于是1+o就得到了3.这种方法就相当于o.valueOf覆盖Object.property.valueOf。    </p>
<h3 id="2-Object-prototype-toString"><a href="#2-Object-prototype-toString" class="headerlink" title="2.Object.prototype.toString()"></a>2.Object.prototype.toString()</h3><p>toString方法的作用是返回一个对象的字符串形式，默认情况下返回类型字符串。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o1.toString();<span class="comment">//'[object Object]'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line">o2.toString();<span class="comment">//'[object Object]'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码表示，对于一个对象调用toString方法，返回字符串[object Object]，该字符串说明对象的类型。<br>字符串[object Object]本身没有太大的用处，但是通过自定义toString方法，可以让对象在自动类型转换时，得到想要的字符串形式。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=<span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line">o.toString=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(o+<span class="string">' '</span>+<span class="string">'world'</span>);<span class="comment">//'hello world'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码表示，当对象用于字符串加法时，会自动调用toString方法。由于自定义toString方法，所以返回字符串hello world。<br>数组，字符串，函数，Date都分别部署了自己版本的toString方法，覆盖了Object.prototype.toString方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].toString());<span class="comment">//'1,2,3'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'123'</span>.toString());<span class="comment">//'123'</span></span><br><span class="line"><span class="keyword">var</span> s1=(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;).toString();</span><br><span class="line"><span class="built_in">console</span>.log(s1);</span><br><span class="line"><span class="comment">// 'function()&#123;</span></span><br><span class="line"><span class="comment">//   return 123;</span></span><br><span class="line"><span class="comment">// &#125;'</span></span><br><span class="line"><span class="keyword">var</span> s2=(<span class="keyword">new</span> <span class="built_in">Date</span>()).toString();</span><br><span class="line"><span class="comment">// "Tue May 10 2016 09:11:31 GMT+0800 (CST)"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-toString-的应用：判断数据类型"><a href="#3-toString-的应用：判断数据类型" class="headerlink" title="3. toString()的应用：判断数据类型"></a>3. toString()的应用：判断数据类型</h3><p>Object.prototype.toString方法返回对象的数据类型字符串，因此可以用来判断一个值的类型。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(o.toString());<span class="comment">//'[object Object]'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码调用空对象的toString方法，结果返回一个字符串[object Object]，其中第二个Object表示该值的构造函数。这是一个十分有用的判断数据类型的方法。<br>实例对象可能会自定义toString方法。通过函数call方法，可以在任意值上调用Object.prototype.toString方法，帮助我们判断这个值的类型。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(value);</span><br></pre></td></tr></table></figure></p>
<p>不同数据 类型的Object.prototype.toString方法返回值如下：</p>
<ul>
<li>数值：返回[object Number]</li>
<li>字符串：返回[object String]</li>
<li>布尔值：返回[object Boolean]</li>
<li>undefined:返回[object Undefined]</li>
<li>null:返回[object Null]</li>
<li>数组：返回[object Array]</li>
<li>arguments对象：返回[object Arguments]</li>
<li>函数：返回[object Function]</li>
<li>Error对象：返回[object Error]</li>
<li>Date对象：返回[object Date]</li>
<li>RegExp对象:返回[object RegExp]</li>
<li>其他对象：返回[object Object]</li>
</ul>
<p>也就是说，Object.prototype.toString可以得到一个实例对象的构造函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="number">2</span>));<span class="comment">//'[object Number]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="string">''</span>));<span class="comment">//'[object String]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>));<span class="comment">//'[object Boolean]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>));<span class="comment">//'[object Undefined]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>));<span class="comment">//'[object Null]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Math</span>));<span class="comment">//'[object Math]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;));<span class="comment">//'[object Object]'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call([]));<span class="comment">//'[object Array]'</span></span><br></pre></td></tr></table></figure></p>
<p>利用这个特性，可以写出一个typeof运算符更准确的类型判断函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type=<span class="function"><span class="keyword">function</span>(<span class="params"><span class="number">0</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s=<span class="built_in">Object</span>.prototype.toString.call(o);</span><br><span class="line">  <span class="keyword">return</span> s.match(<span class="regexp">/\[object (.*?)\]/</span>)[<span class="number">1</span>].toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(type(&#123;&#125;));<span class="comment">//'object'</span></span><br><span class="line"><span class="built_in">console</span>.log(type([]));<span class="comment">//'array'</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="ES6中对象相关扩展"><a href="#ES6中对象相关扩展" class="headerlink" title="ES6中对象相关扩展"></a>ES6中对象相关扩展</h1><h3 id="1-属性的简洁表示法"><a href="#1-属性的简洁表示法" class="headerlink" title="1. 属性的简洁表示法"></a>1. 属性的简洁表示法</h3><p>ES6允许直接写入变量和函数，作为对象的属性和方法。这样的书写更加简洁。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo=<span class="string">'bar'</span>;</span><br><span class="line"><span class="keyword">const</span> baz=&#123;foo&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">const</span> baz=&#123;<span class="attr">foo</span>:foo&#125;;</span><br></pre></td></tr></table></figure></p>
<p>示例中表明，ES6允许在对象之中，直接写变量。这时，属性名为变量名，属性值为变量的值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;x,y&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">x</span>:x,<span class="attr">y</span>:y&#125;;</span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//&#123;x:1,y:2&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>除了属性简写，方法也可以简写。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o=&#123;</span><br><span class="line">  method()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">const</span> o=&#123;</span><br><span class="line">  method:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种写法用于函数的返回值，将会非常方便。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPoint</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x=<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> y=<span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;x,y&#125;</span><br><span class="line">&#125;</span><br><span class="line">getPoint();</span><br><span class="line"><span class="comment">//&#123;x:1,y:10&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>CommonJS模块输出的一组变量就非常适合简洁写法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ms=&#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getItem</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> key <span class="keyword">in</span> ms ? ms[key]:<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setItem</span>(<span class="params">key,value</span>)</span>&#123;</span><br><span class="line">  ms[key]=value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ms=&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports=&#123;getItem,setItem,clear&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">  getItem:getItem,</span><br><span class="line">  setItem:setItem,</span><br><span class="line">  clear:clear</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>属性的赋值器（setter）和取值器（getter），事实上也是采用这种写法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cart=&#123;</span><br><span class="line">  _wheels:<span class="number">4</span>,</span><br><span class="line">  get wheels()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._wheels;</span><br><span class="line">  &#125;,</span><br><span class="line">  set wheels()&#123;</span><br><span class="line">    <span class="keyword">if</span>(value&lt;<span class="keyword">this</span>._wheels)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'数值太小了！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>._wheels = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>==注意==：简洁写法的属性名总是字符串，这会导致一些看上去比较奇怪的结果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span>()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    <span class="string">'class'</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，class是字符串，所以不会因为它属于关键字，而导致语法解析报错。<br>如果某个方法的值是一个Generator函数，前面需要加上星号。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  * m()&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'hello world'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2、属性名表达式"><a href="#2、属性名表达式" class="headerlink" title="2、属性名表达式"></a>2、属性名表达式</h3><p>javascript定义对象的属性，有两种方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一</span></span><br><span class="line">obj.foo=<span class="literal">true</span>;</span><br><span class="line"><span class="comment">//方法二</span></span><br><span class="line">obj[<span class="string">'a'</span>+<span class="string">'bc'</span>]=<span class="number">123</span>;</span><br></pre></td></tr></table></figure></p>
<p>但是，如果使用字面量方式定义对象（使用大括号），在ES5中只能使用方法一（标识符）定义属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  foo:<span class="literal">true</span>,</span><br><span class="line">  abc:<span class="number">123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ES6允许字面量定义对象，用方法二（表达式）作为对象的属性名，即把表达式放在方括号内。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> propKey=<span class="string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    [propKey]:<span class="literal">true</span>,</span><br><span class="line">    [<span class="string">'a'</span>+<span class="string">'bc'</span>]:<span class="number">123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面是另一个例子。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lastWord=<span class="string">'last word'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a=&#123;</span><br><span class="line">    <span class="string">'first word'</span>:<span class="string">'hello'</span>,</span><br><span class="line">    [lastWord]:<span class="string">'world'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a[<span class="string">'first word'</span>];<span class="comment">//'hello'</span></span><br><span class="line">a[lastWord] <span class="comment">// "world"</span></span><br><span class="line">a[<span class="string">'last word'</span>] <span class="comment">// "world"</span></span><br></pre></td></tr></table></figure></p>
<p>表达式还可以用于定义方法名。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">    [<span class="string">'h'</span>+<span class="string">'ello'</span>]()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'hi'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.hello();<span class="comment">//'hi'</span></span><br></pre></td></tr></table></figure></p>
<p>==注意==：   </p>
<ol>
<li>属性名表达式与简写表示不能同时使用，会报错。</li>
<li>属性名表达式如果是一个对象，默认情况下会自动将对象转为字符串’[object Object]’,这一点要特别小心。</li>
</ol>
<h3 id="3-方法的name属性"><a href="#3-方法的name属性" class="headerlink" title="3. 方法的name属性"></a>3. 方法的name属性</h3><p>函数的name属性，返回函数名。对象方法也是函数，因此也有name属性。<br>示例一：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person=&#123;</span><br><span class="line">    sayName()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(person.sayName.name);<span class="comment">//'sayName'</span></span><br></pre></td></tr></table></figure></p>
<p>如果对象的方法使用了取值函数（getter）和存值函数（setter），则name属性不是在该方法上面，而是该方法的属性描述对象的get和set属性上面，返回值是方法名前加上get和set。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  get foo()&#123;&#125;,</span><br><span class="line">  set foo()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  get foo()&#123;&#125;,</span><br><span class="line">  set foo(x)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.foo.name);<span class="comment">//TypeError: Cannot read property 'name' of undefined</span></span><br><span class="line"><span class="keyword">const</span> descriptor=<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj,<span class="string">'foo'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(descriptor.get.name);<span class="comment">//'get foo'</span></span><br><span class="line"><span class="built_in">console</span>.log(descriptor.set.name);<span class="comment">//'set foo'</span></span><br></pre></td></tr></table></figure></p>
<p>==有两种特殊情况==：nd方法创造的函数，name属性返回bound加上原函数名字；Function构造函数创造的函数，name属性返回anonymous。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1=(<span class="keyword">new</span> <span class="built_in">Function</span>()).name;<span class="keyword">var</span> s1=(<span class="keyword">new</span> <span class="built_in">Function</span>()).name;</span><br><span class="line"><span class="built_in">console</span>.log(s1);</span><br><span class="line"><span class="keyword">var</span> doSomething=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s2=doSomething.bind().name;</span><br><span class="line"><span class="built_in">console</span>.log(s2);<span class="comment">//'bound doSomething'</span></span><br></pre></td></tr></table></figure></p>
<p>如果对象的方法是一个Symbol值，那么name属性返回的是这个Symbol值的描述。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key1=<span class="built_in">Symbol</span>(<span class="string">'descriptor'</span>);</span><br><span class="line"><span class="keyword">const</span> key2=<span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">  [key1]()&#123;&#125;,</span><br><span class="line">  [key2]()&#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj[key1].name);<span class="comment">//'[description]'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[key2].name);<span class="comment">//''</span></span><br></pre></td></tr></table></figure></p>
<p>代码中，key1对应的Symbol值有描述，key2没有。    </p>
<h3 id="4-Object-is"><a href="#4-Object-is" class="headerlink" title="4. Object.is()"></a>4. Object.is()</h3><p>ES5比较两个值是否相等，只有两个运算符：相等运算符合严格相等运算符。它们都有各自的缺点，前者会自动转换数据类型，后者NaN不等于自身，-0和+0相等。<br>Object.is()方法来解决这两个缺点。<br>Object.is()和===类似。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">-0</span>,+<span class="number">0</span>);<span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>,<span class="literal">NaN</span>);<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="5-Object-assign"><a href="#5-Object-assign" class="headerlink" title="5. Object.assign()"></a>5. Object.assign()</h3><p>Object.assign()方法用于对象的合并，将原对象（source）的所有可枚举属性，赋值到目标对象（target）。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">cosnt source1=&#123;<span class="attr">b</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> source2=&#123;<span class="attr">c</span>:<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(target,source1,source2);</span><br><span class="line"><span class="built_in">console</span>.log(target);<span class="comment">//&#123;a:1,b:2,c:3&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>==注意==：如果目标对象与原来对象有同名属性，或者多个对象同名属性，则后面的属性会覆盖前面的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2);</span><br><span class="line">target <span class="comment">// &#123;a:1, b:2, c:3&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>如果只有一个参数，Object.assign会直接返回该参数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj)===obj;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>如果该参数不是对象，则会先转成对象，然后返回。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">Object</span>.assign(<span class="number">2</span>) <span class="comment">// "object"</span></span><br></pre></td></tr></table></figure></p>
<p>由于undefined和null无法转成对象，所以如果它们作为参数，就会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">undefined</span>);<span class="comment">//报错</span></span><br><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">null</span>);<span class="comment">//报错</span></span><br></pre></td></tr></table></figure></p>
<p>如果非对象参数出现在源对象的位置（即非首参数），那么处理规则有所不同。首先，这些参数都会转成对象，如果无法转成对象，就会跳过。这意味着，如果undefined和null不在首参数，就不会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj,<span class="literal">undefined</span>)===obj;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.assign(obj, <span class="literal">null</span>) === obj <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>其他类型的值（即数值，字符串和布尔值）不在首参数，也不会报错。但是，除了字符串以数组的形式，拷贝如目标对象，其他都不会产生任何效果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> v1=<span class="string">'abc'</span>;</span><br><span class="line"><span class="keyword">const</span> v2=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> v3=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj=<span class="built_in">Object</span>.assign(&#123;&#125;,v1,v2,v3);</span><br><span class="line"><span class="built_in">console</span>.log(obj);<span class="comment">//&#123;'0':'a','1':'b','2':'c'&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，v1,v2,v3分别是字符串，布尔值和数值，结果只有字符串合如目标对象（以字符数组的形式），数值和布尔值都会被忽略。这是因为只有字符串的包装对象，会产生可枚举属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>(<span class="literal">true</span>);<span class="comment">//&#123;[[PrimitiveValue]]: true&#125;</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="number">10</span>)  <span class="comment">//  &#123;[[PrimitiveValue]]: 10&#125;</span></span><br><span class="line"><span class="built_in">Object</span>(<span class="string">'abc'</span>) <span class="comment">// &#123;0: "a", 1: "b", 2: "c", length: 3, [[PrimitiveValue]]: "abc"&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>Object.assign拷贝的属性是有限制的，值拷贝源对象自身的属性（不拷贝继承属性），不拷贝不可枚举属性（enumerable: false）。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o=<span class="built_in">Object</span>.assign(&#123;<span class="attr">b</span>:<span class="string">'c'</span>&#125;,</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(&#123;&#125;,<span class="string">'invisible'</span>,&#123;</span><br><span class="line">    enumerable:<span class="literal">false</span>,</span><br><span class="line">    value:<span class="string">'hello'</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">console</span>.log(o);<span class="comment">//&#123;b:'c'&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，Object.assign要拷贝的对象只有一个不可枚举属性invisible，这个属性并没有被拷贝进去。<br>属性名为Symbol值的属性，也会被Object.assign拷贝。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123;<span class="attr">a</span>:<span class="string">'b'</span>&#125;,&#123;[<span class="built_in">Symbol</span>(<span class="string">'c'</span>)]:<span class="string">'d'</span>&#125;);</span><br><span class="line"><span class="comment">//&#123;a:'b',Symbol(c):'d'&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>==注意点==：   </p>
<h4 id="（1）、浅拷贝"><a href="#（1）、浅拷贝" class="headerlink" title="（1）、浅拷贝"></a>（1）、浅拷贝</h4><p>Object.assign方法实行的是浅拷贝，而不是深拷贝，也就是说，源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1=&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="number">1</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2=<span class="built_in">Object</span>.assign(&#123;&#125;,obj1);</span><br><span class="line"></span><br><span class="line">obj1.a.b=<span class="number">2</span>;</span><br><span class="line">obj2.a.b;<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<h4 id="（2）、同名属性的替换"><a href="#（2）、同名属性的替换" class="headerlink" title="（2）、同名属性的替换"></a>（2）、同名属性的替换</h4><p>对于这种嵌套的对象，一旦遇到同名属性，Object.assign的处理方法是替换，而不是添加。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cont target=&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="string">'c'</span>,<span class="attr">d</span>:<span class="string">'e'</span>&#125;&#125;</span><br><span class="line"><span class="keyword">const</span> source=&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="string">'hello'</span>&#125;&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(target,source)</span><br><span class="line"><span class="comment">//&#123;a:&#123;b:'hello'&#125;&#125;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="（3）、数组处理"><a href="#（3）、数组处理" class="headerlink" title="（3）、数组处理"></a>（3）、数组处理</h4><p>Object.assign可以用来处理数组，但是会把数组视为对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>]);</span><br><span class="line"><span class="comment">//[4,5,3]</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，Object.assign把数组视为属性名为0,1,2的对象，因此源数组的0号属性4覆盖了目标数组的0号属性1。    </p>
<h4 id="（4）、取值函数的处理"><a href="#（4）、取值函数的处理" class="headerlink" title="（4）、取值函数的处理"></a>（4）、取值函数的处理</h4><p>Object.assign只能进行值的复制，如果复制的值是一个取值函数，那么将求值后再复制。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source=&#123;</span><br><span class="line">  get foo()&#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> target=&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(target,source)</span><br><span class="line"><span class="comment">//&#123;foo:1&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，source对象的foo属性是一个取值函数，Object.assign不会复制这个取值函数，只会拿到值以后，将这个值复制过去。   </p>
<h4 id="（5）、常见用途"><a href="#（5）、常见用途" class="headerlink" title="（5）、常见用途"></a>（5）、常见用途</h4><h5 id="为对象添加属性"><a href="#为对象添加属性" class="headerlink" title="为对象添加属性"></a>为对象添加属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(x,y)&#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>,&#123;x,y&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="为对象添加方法"><a href="#为对象添加方法" class="headerlink" title="为对象添加方法"></a>为对象添加方法</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(SomeClass.prototype,&#123;</span><br><span class="line">  someMethod(arg1,arg2)&#123;</span><br><span class="line">        <span class="comment">//..</span></span><br><span class="line">    &#125;,</span><br><span class="line">    anotherMethod()&#123;</span><br><span class="line">        <span class="comment">//..</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="克隆对象"><a href="#克隆对象" class="headerlink" title="克隆对象"></a>克隆对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">origin</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;,origin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不过，这种方法克隆，只能克隆原始对象自身的值，不能克隆它的继承的值。如果想要保持继承链，可以采用下的代码。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">origin</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> originProto=<span class="built_in">Object</span>.getPropertyOf(origin);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(<span class="built_in">Object</span>.create(originProto),origin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="为属性指定默认值"><a href="#为属性指定默认值" class="headerlink" title="为属性指定默认值"></a>为属性指定默认值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> DEFAULTS=&#123;</span><br><span class="line">    url:&#123;</span><br><span class="line">        host:<span class="string">'example.com'</span>,</span><br><span class="line">        port:<span class="number">7070</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> options=&#123;</span><br><span class="line">    port:<span class="number">8080</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;,DEFAULT,options);</span><br></pre></td></tr></table></figure>
<h3 id="6、属性的可没举行和遍历"><a href="#6、属性的可没举行和遍历" class="headerlink" title="6、属性的可没举行和遍历"></a>6、属性的可没举行和遍历</h3><p>对象每一个属性都有一个可描述对象（Descriptor），用来控制该属性的行为。<br>Object.getOwnPropertyDescriptor()方法可以获取该属性的描述对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="attr">foo</span>:<span class="number">123</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj,<span class="string">'foo'</span>);</span><br><span class="line"><span class="comment">/*&#123;</span></span><br><span class="line"><span class="comment">    value:123,</span></span><br><span class="line"><span class="comment">    witable:true,</span></span><br><span class="line"><span class="comment">    enumberable:true,</span></span><br><span class="line"><span class="comment">    configurable:true</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure></p>
<p>描述对象的enumberable属性，称为“可枚举性”，如果该属性为false，就表示某些操作会忽略当前属性。<br>目前，有四个操作会忽略enumberable为false的属性。   </p>
<ul>
<li>for…in循环：只遍历对象自身和继承的可枚举的属性。</li>
<li>Object.keys():返回对象自身所有可枚举属性的键名。</li>
<li>JSON.stringify():只串行化自身的可枚举属性。  </li>
<li>Object.assign():忽略enumberable为false的属性，只拷贝对象自身的可枚举的属性。</li>
</ul>
<p>这四个操作之中，前三个是ES5就有的，最后一个Object.assign()是ES6新增的。其中，只有for…in会返回继承的属性，其他三个方法都会忽略继承的属性。<br>总的来说，操作中引入了继承的属性会让问题复杂化的，大多数的时候，我们只关心对象自身的属性。所以，尽量不要用for…in循环，而用Object.keys()代替。    </p>
<h4 id="属性的遍历"><a href="#属性的遍历" class="headerlink" title="属性的遍历"></a>属性的遍历</h4><p>ES6一共有5种方法可以遍历对象的属性。   </p>
<ol>
<li>for…in:for…in遍历对象自身的和继承的可枚举属性（不包含Symbol属性）。</li>
<li>Object.keys()返回一个数组，包括对象自身的（不包括继承的）所有可枚举属性（不含Synbol属性）的键名</li>
<li>Object.getPropertyNames(obj)<br>该方法返回一个数组，包含对象自身的所有属性（不含Symbol属性，但是包括不可枚举属性）的键名。</li>
<li>Object.getOwnPropertySymbols(obj)<br>该方法返回一个数组，包含对象自身的所有Symbol属性的键名。</li>
<li>Reflect.ownKeys(obj)<br>该方法，返回一个数组，包含对象自身的所有键名，不管键名是Symbol或字符串，也不管是否可枚举。</li>
</ol>
<p>以上5种方法遍历对象的键名，都遵守同样的属性遍历次序规则：   </p>
<ul>
<li>首先遍历所有数值键，按照数值升序排列。</li>
<li>其次遍历所有字符串键，按照加入时间排序</li>
<li>最后遍历Symbol键，按照加入时间排序。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.ownKeys(&#123;[<span class="built_in">Symbol</span>()]:<span class="number">0</span>,<span class="attr">b</span>:<span class="number">0</span>,<span class="number">10</span>:<span class="number">0</span>,<span class="number">2</span>:<span class="number">0</span>,<span class="attr">a</span>:<span class="number">0</span>&#125;)</span><br><span class="line"><span class="comment">//['2','10','b','a',Symbol()]</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，Reflect.ownKeys方法返回一个数组，包含了参数对象的所有属性。这个数组的属性次序是这样的，首先是数值属性2和101，其次是字符串属性b和a，最后是Symbol属性。    </p>
<h3 id="7-Object-getOwnPropertyDescriptors"><a href="#7-Object-getOwnPropertyDescriptors" class="headerlink" title="7.Object.getOwnPropertyDescriptors()"></a>7.Object.getOwnPropertyDescriptors()</h3><p>该方法会返回某个对象属性的描述对象（非继承属性）。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">    foo:<span class="number">123</span>,</span><br><span class="line">    get bar()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'abc'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj);</span><br><span class="line"><span class="comment">/*&#123;</span></span><br><span class="line"><span class="comment">    foo:</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        value:123,</span></span><br><span class="line"><span class="comment">        writable:true,</span></span><br><span class="line"><span class="comment">        enumberable:true,</span></span><br><span class="line"><span class="comment">        configurable:true</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    bar:&#123;</span></span><br><span class="line"><span class="comment">        get:[function:get bar],</span></span><br><span class="line"><span class="comment">        set:undefined,</span></span><br><span class="line"><span class="comment">        enumberable:true</span></span><br><span class="line"><span class="comment">        configurable:true</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，该方法返回一个对象，所有原对象的属性名都是该对象的属性名，对应的属性值就是该属性的描述对象。<br>该方法的实现非常容易。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOwnPropertyDescriptors</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reflect=&#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> reflect.ownKeys(obj))&#123;</span><br><span class="line">    result[key]=<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj)&#123;</span><br><span class="line">      result[key]=<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj.key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>该方法的引人入目的，主要是为了了解Object.assign()方法无法正确拷贝get和set属性的问题。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source=&#123;</span><br><span class="line">  set foo(value)&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(value);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> target=&#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(target1,source);   </span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(target1,<span class="string">'foo'</span>);</span><br><span class="line"><span class="comment">// &#123; value: undefined,</span></span><br><span class="line"><span class="comment">//   writable: true,</span></span><br><span class="line"><span class="comment">//   enumerable: true,</span></span><br><span class="line"><span class="comment">//   configurable: true &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>示例中，source对象的foo属性的值是一个赋值函数，Object.assign方法将这个属性拷贝给target1对象，结果该属性的值变成了undefined。这是因为Object.assign方法总是拷贝一个属性的值，而不会拷贝它背后的赋值方法或取值方法。<br>这时，Object.getOwnPropertyDescriptor方法配合Obejct.defineProperties方法，就可以实现正确拷贝。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source=&#123;</span><br><span class="line">  set foo(value)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> target2=&#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(target2,<span class="built_in">Object</span>.getOwnPropertyDescriptors(source));</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(target2,<span class="string">'foo'</span>);</span><br><span class="line"><span class="comment">// &#123; get: undefined,</span></span><br><span class="line"><span class="comment">//   set: [Function: set foo],</span></span><br><span class="line"><span class="comment">//   enumerable: true,</span></span><br><span class="line"><span class="comment">//   configurable: true &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>Object.getOwnPropertyDescriptors方法的另一个用处，是配合Object.create方法，将对象属性克隆到一个新对象。这属于浅拷贝。   </p>
<h3 id="8-proto属性，Object-setPrototypeOf-Object-getPrototypeOf"><a href="#8-proto属性，Object-setPrototypeOf-Object-getPrototypeOf" class="headerlink" title="8.proto属性，Object.setPrototypeOf(),Object.getPrototypeOf()"></a>8.proto属性，Object.setPrototypeOf(),Object.getPrototypeOf()</h3><h4 id="（1）、proto属性"><a href="#（1）、proto属性" class="headerlink" title="（1）、proto属性"></a>（1）、proto属性</h4><p>该属性没有写入ES6的正文，而是写入了附录，原因是<strong>proto</strong>前后的双下划线，说明它本质上是一个内部属性，而不是一个正式的对外的API，只是由于浏览器广泛支持，才被加入了ES6。标准明确规定，只有浏览器必须部署这个属性，其他运行环境不一定需要部署，而且新的代码最好认为这个属性是不存在的。因此，无论从语义的角度，还是从兼容性的角度，都不要使用这个属性，而是使用下面的Object.setPropertyOf()（写操作）、Object.getPropertyOf()（读操作），Object.create()（生成操作）代替。   </p>
<h4 id="（2）、Object-setPrototypeOf"><a href="#（2）、Object-setPrototypeOf" class="headerlink" title="（2）、Object.setPrototypeOf()"></a>（2）、Object.setPrototypeOf()</h4><p>该方法的作用与<strong>proto</strong>相同，用来设置一个对象的prototype对象，返回参数对象本身。它是ES6正式推荐的设置原型对象的方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(object,prototype);</span><br><span class="line"><span class="comment">//用法</span></span><br><span class="line"><span class="keyword">const</span> o=<span class="built_in">Object</span>.setPrototypeOf(&#123;&#125;,<span class="literal">null</span>);</span><br></pre></td></tr></table></figure></p>
<p>如果第一个参数不是对象，会自动转为对象。但是由于返回的还是第一个参数，所以这个操作不会产生任何效果。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="number">1</span>,&#123;&#125;)===<span class="number">1</span>;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="string">'foo'</span>,&#123;&#125;)===<span class="string">'foo'</span>;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="literal">true</span>,&#123;&#125;)===<span class="literal">true</span>;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>由于undefined和null无法转为对象，所以如果第一个参数是undefined或null，就会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="literal">undefined</span>,&#123;&#125;);</span><br><span class="line"><span class="comment">//Error</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="literal">null</span>,&#123;&#125;);</span><br><span class="line"><span class="comment">//Error</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-、Object-getPrototypeOf"><a href="#3-、Object-getPrototypeOf" class="headerlink" title="(3)、Object.getPrototypeOf()"></a>(3)、Object.getPrototypeOf()</h4><p>该方法与Object.setPrototypeOf方法配套，用于读取一个对象的原型对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(obj);</span><br></pre></td></tr></table></figure></p>
<p>看下面示例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> rec=<span class="keyword">new</span> Rectangle();</span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(rec)===Rectangle.prototype;</span><br><span class="line"><span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(rec,<span class="built_in">Object</span>.prototype);</span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(rec)===Rectangle.prototype</span><br><span class="line"><span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>如果参数不是对象，会被自动转为对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//等同于Object.getPrototypeOf(Number(1))</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//Number &#123;[[PrimitiveValue]]:0&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于 Object.getPrototyprOf(String('foo'))</span></span><br><span class="line"><span class="built_in">Object</span>,getPrototypeOf(<span class="string">'foo'</span>);</span><br><span class="line"><span class="comment">//String &#123;length:0,[[PrimitiveValue]]:''&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于Object.getprototypeOf(Boolean(true))</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//Boolean &#123;[[PrimitiveValue]]:fasle&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="number">1</span>)===<span class="built_in">Number</span>.prototype;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="string">'foo'</span>)===<span class="built_in">String</span>.prototype;<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">true</span>)===<span class="built_in">Boolean</span>.prototype;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>如果参数是undefined或null,它们无法转为对象，结果会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">//Error</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">undefined</span>);</span><br><span class="line"><span class="comment">//Error</span></span><br></pre></td></tr></table></figure></p>
<h3 id="9、super关键字"><a href="#9、super关键字" class="headerlink" title="9、super关键字"></a>9、super关键字</h3><p>我们知道，this关键字总是指向函数所在的当前对象，ES6又新增了另一个类似的关键字super，指向当前对象的原型对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proto=&#123;</span><br><span class="line">  foo:<span class="string">'hello'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  find()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj,proto);</span><br><span class="line"><span class="built_in">console</span>.log(obj.find());<span class="comment">//'hello'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，对象obj的find方法之中，通过super.foo引用了原型对象proto的foo属性。<br>注意，super关键字表示原型对象时，只能用在对象的方法之中，用在其他地方都会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  foo:<span class="keyword">super</span>.foo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  foo:<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">super</span>.foo;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  foo:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面三种super的用法都会报错，因为对于javascript引擎来说，这里的super都没有用在对象的方法中。第一种写法是super用在属性里面，第二种写法和第三种写法是super用在一个函数里面然后赋值给foo属性。目前，只有对象方法的简写法可以让javascript引擎确认，定义的是对象的方法。<br>javascript引擎内部，super.foo等同于Object.getPrototypeOf(this).foo(属性)或者Object.getPrototypeOf(this).foo.call(this)(方法)。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proto=&#123;</span><br><span class="line">  x:<span class="string">'hello'</span>,</span><br><span class="line">  foo()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  x:<span class="string">'world'</span>,</span><br><span class="line">  foo()&#123;</span><br><span class="line">    <span class="keyword">super</span>.foo();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj,proto);</span><br><span class="line">obj.foo();<span class="comment">//'hello'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，super.foo指向原型对象protot的foo方法，但是绑定的this却是当前对象obj，因此输出的就是world。    </p>
<h3 id="10、Object-keys-Object-values-Object-entries"><a href="#10、Object-keys-Object-values-Object-entries" class="headerlink" title="10、Object.keys(),Object.values(),Object.entries()"></a>10、Object.keys(),Object.values(),Object.entries()</h3><h4 id="1-、Object-keys"><a href="#1-、Object-keys" class="headerlink" title="(1)、Object.keys()"></a>(1)、Object.keys()</h4><p>ES5引入了Object.keys方法，返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumberable）属性的键名。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">foo</span>:<span class="string">'bar'</span>,<span class="attr">baz</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(obj);</span><br><span class="line"><span class="comment">//['foo','baz']</span></span><br></pre></td></tr></table></figure></p>
<p>ES2017引入了跟Object.keys配套的Object.values和Object.entries，作为遍历一个对象的补充手段供for…of循环使用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key);<span class="comment">//'a','b','c'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> values(obj))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);<span class="comment">//1,2,3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> entries(obj))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([key,value]);<span class="comment">//['a',1],['b',2],['c',3]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="2-、Object-values"><a href="#2-、Object-values" class="headerlink" title="(2)、Object.values()"></a>(2)、Object.values()</h4><p>Object.values方法返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumberable）的键值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;<span class="attr">foo</span>:<span class="string">'bar'</span>,<span class="attr">baz</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.values(obj);<span class="comment">//['baz',42]</span></span><br></pre></td></tr></table></figure></p>
<p>返回数组的成员顺序，与本章“属性的遍历”部分介绍的排列规则一致。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;<span class="number">100</span>:<span class="string">'a'</span>,<span class="number">2</span>:<span class="string">'b'</span>,<span class="number">7</span>:<span class="string">'c'</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.values(obj);</span><br><span class="line"><span class="comment">//['b','c''a']</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，属性名为数值的属性，是按照数值大小，从小到大遍历的，因此返回的顺序是b,c,a。<br>Object.values只返回对象自身的可遍历属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=<span class="built_in">Object</span>.create(&#123;&#125;,&#123;<span class="attr">p</span>:&#123;<span class="attr">value</span>:<span class="number">42</span>&#125;&#125;);</span><br><span class="line">Obejct.values(obj);<span class="comment">//[]</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，Object方法的第二个参数添加的对象属性（属性p），如果不显示声明，默认是不会遍历的，因为p的属性描述对象的enumberable默认是false。<br>Object.values不会返回这个属性。只要把enumberable改变成true，Object.values就会返回属性p的值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=<span class="built_in">Object</span>.create(&#123;&#125;,&#123;<span class="attr">p</span>:</span><br><span class="line">  &#123;</span><br><span class="line">    value:<span class="number">42</span>,</span><br><span class="line">    enumberable:<span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.values(obj);<span class="comment">//[42]</span></span><br></pre></td></tr></table></figure></p>
<p>Object.values会过滤属性名为Symbol值的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.values(&#123;[<span class="built_in">Symbol</span>()]:<span class="number">123</span>,<span class="attr">foo</span>:<span class="string">'abc'</span>&#125;);</span><br><span class="line"><span class="comment">//['abc']</span></span><br></pre></td></tr></table></figure></p>
<p>如果Object.values方法的参数是一个字符串，会返回各个字符串组成的一个数组。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.values(<span class="string">'foo'</span>);</span><br><span class="line"><span class="comment">//['f','o','o']</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，字符串会先转成一个类似数组的对象。字符串的每个字符，就是该对象的一个属性。因此，Object.values返回每个属性的键值，就是各个字符组成的一个数组。<br>如果参数不是对象，Object.values会将其转为对象。由于数值和布尔值的包装对象，都不会为实例添加非继承的属性。所以，Object.values会返回空数组。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.values(<span class="number">42</span>);<span class="comment">//[]</span></span><br><span class="line"><span class="built_in">Object</span>.values(<span class="literal">true</span>);<span class="comment">//[]</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-、Object-entries"><a href="#3-、Object-entries" class="headerlink" title="(3)、Object.entries()"></a>(3)、Object.entries()</h4><p>该方法返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumberable）属性的键值对数组。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;<span class="attr">foo</span>:<span class="string">'bar'</span>,<span class="attr">baz</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.entries(obj);</span><br><span class="line"><span class="comment">//[['foo','bar'],['baz',42]]</span></span><br></pre></td></tr></table></figure></p>
<p>除了返回值不一样，该方法的行为与Object.values基本一致。<br>该方法也会忽略对象的Symbol值的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.entries(&#123;[<span class="built_in">Symbol</span>()]:<span class="number">123</span>,<span class="attr">foo</span>:<span class="string">'abc'</span>&#125;);</span><br><span class="line"><span class="comment">//[['foo','abc']]</span></span><br></pre></td></tr></table></figure></p>
<p>Object.entries的属性用途一，遍历对象的属性。<br>用途二，将对象转为真正的Map结构。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;<span class="attr">foo</span>:<span class="string">'bar'</span>,<span class="attr">baz</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> map=<span class="keyword">new</span> <span class="built_in">Map</span>(Obejct.entries(obj));</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">//Map&#123;foo:'bar',baz:42&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>自己实现Object.entries方法，非常简单。    </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Generator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">entries</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.key(obj))&#123;</span><br><span class="line">    <span class="keyword">yield</span> [key,obj[key]]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//非Generator函数版本</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entries</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr=[];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj))&#123;</span><br><span class="line">    arr.push([key,obj[key]]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-对象的扩展运算符"><a href="#11-对象的扩展运算符" class="headerlink" title="11.对象的扩展运算符"></a>11.对象的扩展运算符</h3><h4 id="1-、解构赋值"><a href="#1-、解构赋值" class="headerlink" title="(1)、解构赋值"></a>(1)、解构赋值</h4><p>对象的解构赋值用于一个对象取值，相当于将所有可遍历的，但尚未被读取的属性，分配到指定的对象上面。所有的键和它们的值，都会拷贝到新对象上面。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x,y,...z&#125;=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>,<span class="attr">a</span>:<span class="number">3</span>,<span class="attr">b</span>:<span class="number">4</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(x);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(y);<span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(z);<span class="comment">//&#123;a:3,b:4&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>由于解构赋值要求右边是一个对象，所以如果等号右边是undefined或null，就会报错，因为它们无法转为对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x,y,...z&#125;=<span class="literal">null</span>;<span class="comment">//运行错误</span></span><br><span class="line"><span class="keyword">let</span> &#123;x,y,...z&#125;=<span class="literal">undefined</span>;<span class="comment">//运行错误</span></span><br></pre></td></tr></table></figure></p>
<p>解构赋值必须是最后一个参数，否则会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;...x,y,z&#125;=obj;<span class="comment">//语句错误</span></span><br><span class="line"><span class="keyword">let</span> &#123;x,...y,...z&#125;=obj;<span class="comment">//语句错误</span></span><br></pre></td></tr></table></figure></p>
<p>注意，解构赋值的拷贝是浅拷贝，如果一个键的值是复合类型（数组，对象，函数），那么解构赋值拷贝的是这个值的引用，而不是这个值的副本。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="number">1</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;...k&#125;=obj;</span><br><span class="line">obj.a.b=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(x.a.b);<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<p>另外扩展运算符的解构赋值，不能复制继承自原型对象的属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o2=&#123;<span class="attr">b</span>:<span class="number">2</span>&#125;;</span><br><span class="line">o2.__proto__=o1;</span><br><span class="line"><span class="keyword">let</span> &#123;...o3&#125;=o2;</span><br><span class="line"><span class="built_in">console</span>.log(o3);<span class="comment">//&#123;b:2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o3.a);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<p>另一个例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o=<span class="built_in">Object</span>.create(&#123;<span class="attr">x</span>:<span class="number">1</span>，y:<span class="number">2</span>&#125;);</span><br><span class="line">o.z=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> &#123;x,...&#123;y,z&#125;&#125;=o;</span><br><span class="line"><span class="keyword">let</span> &#123;x,...&#123;y,z&#125;&#125;=o;</span><br><span class="line"><span class="built_in">console</span>.log(x);<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(y);<span class="comment">//undefiend</span></span><br><span class="line"><span class="built_in">console</span>.log(z);<span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，变量x只是单纯的赋值，所以会读取到对象o的继承属性。   </p>
<h4 id="2-、扩展运算符"><a href="#2-、扩展运算符" class="headerlink" title="(2)、扩展运算符"></a>(2)、扩展运算符</h4><p>扩展运算符（…）用于取出参数对象的所有可遍历属性，拷贝到当前对象之中。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> z=&#123;<span class="attr">a</span>:<span class="number">3</span>,<span class="attr">b</span>:<span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> n=&#123;...z&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(n);<span class="comment">//&#123;a:3,b:4&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>这等同于使用Object.assign方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aClone=&#123;...a&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> aClone=<span class="built_in">Object</span>.assign(&#123;&#125;,a)</span><br></pre></td></tr></table></figure></p>
<p>上面例子只是拷贝了对象的实例的属性，如果想完整克隆一个对象，还拷贝对象原型的属性，可以采用下面的写法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写法一</span></span><br><span class="line"><span class="keyword">const</span> clone1=&#123;</span><br><span class="line">  __proto__=<span class="built_in">Object</span>.getPrototypeOf(obj),</span><br><span class="line">  ...obj</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//写法二</span></span><br><span class="line"><span class="keyword">const</span> clone2=<span class="built_in">Object</span>.assign(</span><br><span class="line">  <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj)),</span><br><span class="line">  obj</span><br><span class="line">);</span><br><span class="line"><span class="comment">//写法三</span></span><br><span class="line"><span class="keyword">const</span> clone3=<span class="built_in">Object</span>.create(</span><br><span class="line">  <span class="built_in">Object</span>.getPrototypeOf(obj),</span><br><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>建议使用方法二和方法三。<br>扩展运算符可以用于合并两个对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ab=&#123;...a,...b&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> ab=<span class="built_in">Object</span>.assign(&#123;&#125;,a,b);</span><br></pre></td></tr></table></figure></p>
<p>如果用户自定义的属性，放在扩展运算符后面，则扩展运算符内部的同名属性会被覆盖掉。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aWidthOverrids=&#123;...a,<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> aWidthOverrids=&#123;...a,...&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">let</span> aWidthOverrirds=&#123;&#123;&#125;,a,&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;&#125;;</span><br></pre></td></tr></table></figure></p>
<p>与数组的扩展运算符一样，对象的扩展运算符后面也可以跟表达式。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj=&#123;</span><br><span class="line">  ...(x&gt;<span class="number">1</span>?&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;:&#123;&#125;),</span><br><span class="line">  b:<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果扩展运算符的参数是null或undefined，这两个值会被忽略，不会报错。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emptyObject=&#123;...null,...undefined&#125;;<span class="comment">//不报错</span></span><br></pre></td></tr></table></figure></p>
<p>扩展运算符的参数对象之中，如果有取值函数get，这个函数是会执行的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/并不会报错，因为x属性只是被定义，但没执行。  </span><br><span class="line"><span class="keyword">let</span> aWidthXGetter=&#123;</span><br><span class="line">    ...a,</span><br><span class="line">    get x()&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'not throw yet'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//会报错，因为x属性被执行了</span></span><br><span class="line"><span class="keyword">let</span> runtimeError=&#123;</span><br><span class="line">    ...a,</span><br><span class="line">    ...&#123;</span><br><span class="line">        get x()&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'not throw yet'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好了ES6中有关对象的扩展基本上已经说完了。   </p>
<hr>
<h1 id="包装对象"><a href="#包装对象" class="headerlink" title="包装对象"></a>包装对象</h1><h2 id="一、包装对象的定义"><a href="#一、包装对象的定义" class="headerlink" title="一、包装对象的定义"></a>一、包装对象的定义</h2><p>有人说，javascript语言“一切皆对象”。这是因为数组和函数本质上都是对象，就连三种原始类型的值——数值，字符串，布尔值在一定条件下，也会自动转为对象，也就是原始类型的“包装对象”。<br>所谓“包装对象”，就是分别与数值，字符串，布尔值对应的Number，String，Boolean三个原生对象。这三个原生对象可以把原始类型的值变成（包装成）对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1=<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">var</span> v2=<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>);</span><br><span class="line"><span class="keyword">var</span> v3=<span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></p>
<p>上面代码根据原始类型的值，生成了三个对象，与原始值的类型不同。这用typeof运算符就可以看出来。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> v1 <span class="comment">//'object'</span></span><br><span class="line"><span class="keyword">typeof</span> v2 <span class="comment">//'object'</span></span><br><span class="line"><span class="keyword">typeof</span> v3 <span class="comment">//'object'</span></span><br><span class="line"></span><br><span class="line">v1===<span class="number">123</span><span class="comment">//false</span></span><br><span class="line">v2===<span class="string">'abc'</span><span class="comment">//false</span></span><br><span class="line">v3===<span class="literal">true</span><span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>javascript设计包装对象的最大目的，首先是使得javascript的“对象”涵盖所有的值。其次，使得原始类型的值可以方便地调用特定方法。<br>Number、String和Boolean如果不作为构造函数调用（即调用时不加new），常常用于任意类型的值转为数值，字符串和布尔值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="number">123</span>);<span class="comment">//123</span></span><br><span class="line"><span class="built_in">String</span>(<span class="string">'abc'</span>);<span class="comment">//'abc'</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">true</span>);<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>总之，这三个对象作为构造函数使用（带有new）时，可以将原始类型的值转为对象；作为普通函数使用时（不带有new），可以将任意类型的值，转为原始类型的值。   </p>
<h2 id="二、包装对象实例的方法"><a href="#二、包装对象实例的方法" class="headerlink" title="二、包装对象实例的方法"></a>二、包装对象实例的方法</h2><p>包装对象实例可以使用Object对象提供的原生方法，主要是valueOf方法和toString方法。    </p>
<h3 id="1-valueOf"><a href="#1-valueOf" class="headerlink" title="1.valueOf()"></a>1.valueOf()</h3><p>valueOf()方法返回包装对象实例对应的原始类型的值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>).valueOf();<span class="comment">//123</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>).valueOf();<span class="comment">//'abc'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="string">'true'</span>).valueOf();<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-toString"><a href="#2-toString" class="headerlink" title="2.toString()"></a>2.toString()</h3><p>toString()方法返回实例对应的字符串形式。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>).toString();<span class="comment">//'123'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>).toString();<span class="comment">//'abc'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="string">'true'</span>).toString();<span class="comment">//'true'</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-原始类型的自动转换"><a href="#3-原始类型的自动转换" class="headerlink" title="3.原始类型的自动转换"></a>3.原始类型的自动转换</h3><p>原始类型值，可以自动当对象调用，即调用各种对象的方法和参数。这时，javascript引擎会自动将原始类型的值转为包装对象，在使用后立刻销毁。比如，字符串可以调用length属性，返回字符串的长度。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'abc'</span>.length)<span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，abc是一个字符串，本身不是对象，不能调用length属性。javascript引擎自动将其转为包装对象，在这个对象调用length属性。调用结束后，这个临时对象就会被烧毁。这就叫原始类型的自动转换。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">'abc'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.length);<span class="comment">//3</span></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="keyword">var</span> strObj=<span class="keyword">new</span> <span class="built_in">String</span>(str);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    String&#123;</span></span><br><span class="line"><span class="comment">        0: "a", 1: "b", 2: "c", length: 3, [[PrimitiveValue]]: "abc"</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">console</span>.log(strObj.length);<span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，字符串abc的包装对象有每个位置的值，有length属性，还有一个内部属性[[PrimitiveValue]]保存字符串的原始值。这个[[PrimitiveValue]]内部属性，外部是无法调用，仅供ValueOf或toString这样的内部方法调用。<br>这个临时对象是只读的，无法修改。所以，字符串无法添加新属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s=<span class="string">'hello world'</span>;</span><br><span class="line">s.x=<span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.x);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码为字符串s添加了一个x属性，结果无效，总是返回undefined。    </p>
<p>另一方面，调用结束后，临时对象会自动销毁这意味着，下一次调用字符串的属性时，实际是调用一个新生成的对象，而不是上一次调用时生成的那个对象，所以取不到赋值在上一个对象的属性。如果想要为字符串添加属性，只有在它的原型对象String.prototype上定义。<br>这种原始类型值可以直接调用的方法还有很多，除了前面介绍过的valueOf和toString方法，还包括三个包装对象各自定义在原型上的方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span>.charAt===<span class="built_in">String</span>.prototype.charAt;<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>如果包装对象与原始类型值进行混合运算，包装对象会转化为原始类型（实际是调用自身的valueOf方法）。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>)+<span class="number">123</span>;<span class="comment">//246</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>)+<span class="string">'abc'</span>;<span class="comment">//'abcabc'</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-自定义方法"><a href="#4-自定义方法" class="headerlink" title="4.自定义方法"></a>4.自定义方法</h3><p>三种包装对象还可以在原始类型上添加自定义方法和属性，供原始类型的值直接调用。<br>比如，我们可以新增一个double方法，使得字符串和数字翻倍。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.double=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.valueOf()+<span class="keyword">this</span>.valueOf();</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">'abc'</span>.double();</span><br><span class="line"><span class="comment">//'dabcabc'</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.double=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.valueOf()+<span class="keyword">this</span>.valueOf();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="number">123</span>).double();</span><br><span class="line"><span class="comment">//246</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中在123外面必须要加上圆括号，否则后面的点运算符（.）会被解释成小数点。<br>但是，这种自定义方法和属性的机制，只能定义在包装对象的原型上，如果直接对象原始类型的变量添加属性，则无效。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s=<span class="string">'abc'</span>;</span><br><span class="line">s.p=<span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.p);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码直接对字符串添加属性，结果无效。主要原因是上面说的，这里的包装对象是自动生成的，赋值后自动销毁，所以最后一行实际上调用的是一个新的包装对象。    </p>

      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/uploads/wechat-qcode.png" alt="稻香Snowy wechat" style="width: 200px; max-width: 100%;"/>
    <div>欢迎您扫一扫上面的微信公众号，订阅我的博客！</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="稻香Snowy 微信支付"/>
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript初探/" rel="tag"><i class="fa fa-tag"></i> JavaScript初探</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/JavaScript/JS初探五（JS中的数值）/" rel="next" title="JS初探五（JS中的数值）">
                <i class="fa fa-chevron-left"></i> JS初探五（JS中的数值）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/JavaScript/JS初探七（JS中的数组）/" rel="prev" title="JS初探七（JS中的数组）">
                JS初探七（JS中的数组） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/toux.jpg"
                alt="稻香Snowy" />
            
              <p class="site-author-name" itemprop="name">稻香Snowy</p>
              <p class="site-description motion-element" itemprop="description">Stay Hungry.Stay Foolish</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Asiazdx" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/u/fb5f478b1a94" target="_blank" title="简书">
                      
                        <i class="fa fa-fw fa-heartbeat"></i>简书</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/59638598f265da6c4523c761" target="_blank" title="掘金">
                      
                        <i class="fa fa-fw fa-spinner"></i>掘金</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/5541828133/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-Weibo"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、概述"><span class="nav-number">1.</span> <span class="nav-text">一、概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-生成方法"><span class="nav-number">1.1.</span> <span class="nav-text">1.生成方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-键名"><span class="nav-number">1.2.</span> <span class="nav-text">2.键名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-对象的引用"><span class="nav-number">1.3.</span> <span class="nav-text">3.对象的引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-表达式还是语句？"><span class="nav-number">1.4.</span> <span class="nav-text">4.表达式还是语句？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、属性操作"><span class="nav-number">2.</span> <span class="nav-text">二、属性操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-读取属性"><span class="nav-number">2.1.</span> <span class="nav-text">1.读取属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-属性的赋值"><span class="nav-number">2.2.</span> <span class="nav-text">2. 属性的赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-查看所有属性"><span class="nav-number">2.3.</span> <span class="nav-text">3.查看所有属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-delete命令"><span class="nav-number">2.4.</span> <span class="nav-text">4. delete命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-in运算符"><span class="nav-number">2.5.</span> <span class="nav-text">5.in运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-for…in循环"><span class="nav-number">2.6.</span> <span class="nav-text">6.for…in循环</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、对象结合width语句的应用"><span class="nav-number">3.</span> <span class="nav-text">三、对象结合width语句的应用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#标准库（Object）"><span class="nav-number"></span> <span class="nav-text">标准库（Object）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、概述-1"><span class="nav-number">1.</span> <span class="nav-text">一、概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-部署在Object对象本身"><span class="nav-number">1.1.</span> <span class="nav-text">1.部署在Object对象本身</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-部署在Object-prototype对象"><span class="nav-number">1.2.</span> <span class="nav-text">2. 部署在Object.prototype对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、Object"><span class="nav-number">2.</span> <span class="nav-text">二、Object()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、Object对象的静态方法"><span class="nav-number">3.</span> <span class="nav-text">三、Object对象的静态方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Object-keys-Object-getOwnPropertyNames"><span class="nav-number">3.1.</span> <span class="nav-text">1.Object.keys(),Object.getOwnPropertyNames()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-其他方法"><span class="nav-number">3.2.</span> <span class="nav-text">2.其他方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#（1）、对象属性模型的相关方法"><span class="nav-number">3.2.1.</span> <span class="nav-text">（1）、对象属性模型的相关方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（2）、控制对象状态的方法"><span class="nav-number">3.2.2.</span> <span class="nav-text">（2）、控制对象状态的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（3）、原型相关方法"><span class="nav-number">3.2.3.</span> <span class="nav-text">（3）、原型相关方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、Object对象的实例方法"><span class="nav-number">4.</span> <span class="nav-text">四、Object对象的实例方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Object-prototype-valueOf"><span class="nav-number">4.1.</span> <span class="nav-text">1.Object.prototype.valueOf()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Object-prototype-toString"><span class="nav-number">4.2.</span> <span class="nav-text">2.Object.prototype.toString()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-toString-的应用：判断数据类型"><span class="nav-number">4.3.</span> <span class="nav-text">3. toString()的应用：判断数据类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ES6中对象相关扩展"><span class="nav-number"></span> <span class="nav-text">ES6中对象相关扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-属性的简洁表示法"><span class="nav-number">0.1.</span> <span class="nav-text">1. 属性的简洁表示法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、属性名表达式"><span class="nav-number">0.2.</span> <span class="nav-text">2、属性名表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-方法的name属性"><span class="nav-number">0.3.</span> <span class="nav-text">3. 方法的name属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Object-is"><span class="nav-number">0.4.</span> <span class="nav-text">4. Object.is()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Object-assign"><span class="nav-number">0.5.</span> <span class="nav-text">5. Object.assign()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#（1）、浅拷贝"><span class="nav-number">0.5.1.</span> <span class="nav-text">（1）、浅拷贝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（2）、同名属性的替换"><span class="nav-number">0.5.2.</span> <span class="nav-text">（2）、同名属性的替换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（3）、数组处理"><span class="nav-number">0.5.3.</span> <span class="nav-text">（3）、数组处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（4）、取值函数的处理"><span class="nav-number">0.5.4.</span> <span class="nav-text">（4）、取值函数的处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（5）、常见用途"><span class="nav-number">0.5.5.</span> <span class="nav-text">（5）、常见用途</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#为对象添加属性"><span class="nav-number">0.5.5.1.</span> <span class="nav-text">为对象添加属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#为对象添加方法"><span class="nav-number">0.5.5.2.</span> <span class="nav-text">为对象添加方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#克隆对象"><span class="nav-number">0.5.6.</span> <span class="nav-text">克隆对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为属性指定默认值"><span class="nav-number">0.5.7.</span> <span class="nav-text">为属性指定默认值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、属性的可没举行和遍历"><span class="nav-number">0.6.</span> <span class="nav-text">6、属性的可没举行和遍历</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#属性的遍历"><span class="nav-number">0.6.1.</span> <span class="nav-text">属性的遍历</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Object-getOwnPropertyDescriptors"><span class="nav-number">0.7.</span> <span class="nav-text">7.Object.getOwnPropertyDescriptors()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-proto属性，Object-setPrototypeOf-Object-getPrototypeOf"><span class="nav-number">0.8.</span> <span class="nav-text">8.proto属性，Object.setPrototypeOf(),Object.getPrototypeOf()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#（1）、proto属性"><span class="nav-number">0.8.1.</span> <span class="nav-text">（1）、proto属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#（2）、Object-setPrototypeOf"><span class="nav-number">0.8.2.</span> <span class="nav-text">（2）、Object.setPrototypeOf()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-、Object-getPrototypeOf"><span class="nav-number">0.8.3.</span> <span class="nav-text">(3)、Object.getPrototypeOf()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、super关键字"><span class="nav-number">0.9.</span> <span class="nav-text">9、super关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、Object-keys-Object-values-Object-entries"><span class="nav-number">0.10.</span> <span class="nav-text">10、Object.keys(),Object.values(),Object.entries()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-、Object-keys"><span class="nav-number">0.10.1.</span> <span class="nav-text">(1)、Object.keys()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-、Object-values"><span class="nav-number">0.10.2.</span> <span class="nav-text">(2)、Object.values()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-、Object-entries"><span class="nav-number">0.10.3.</span> <span class="nav-text">(3)、Object.entries()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-对象的扩展运算符"><span class="nav-number">0.11.</span> <span class="nav-text">11.对象的扩展运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-、解构赋值"><span class="nav-number">0.11.1.</span> <span class="nav-text">(1)、解构赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-、扩展运算符"><span class="nav-number">0.11.2.</span> <span class="nav-text">(2)、扩展运算符</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#包装对象"><span class="nav-number"></span> <span class="nav-text">包装对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、包装对象的定义"><span class="nav-number">1.</span> <span class="nav-text">一、包装对象的定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、包装对象实例的方法"><span class="nav-number">2.</span> <span class="nav-text">二、包装对象实例的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-valueOf"><span class="nav-number">2.1.</span> <span class="nav-text">1.valueOf()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-toString"><span class="nav-number">2.2.</span> <span class="nav-text">2.toString()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-原始类型的自动转换"><span class="nav-number">2.3.</span> <span class="nav-text">3.原始类型的自动转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-自定义方法"><span class="nav-number">2.4.</span> <span class="nav-text">4.自定义方法</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">稻香Snowy</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  <div class="bg_content">
    <div class="filter"></div>
    <canvas id="canvas"></canvas>
  </div>
</body>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var cw = canvas.width = window.innerWidth,
  cx = cw / 2;
var ch = canvas.height = window.innerHeight,
  cy = ch / 2;

ctx.fillStyle = "#999";
var linesNum = 16;
var linesRy = [];
var requestId = null;

function Line(flag) {
  this.flag = flag;
  this.a = {};
  this.b = {};
  if (flag == "v") {
    this.a.y = 0;
    this.b.y = ch;
    this.a.x = randomIntFromInterval(0, ch);
    this.b.x = randomIntFromInterval(0, ch);
  } else if (flag == "h") {
    this.a.x = 0;
    this.b.x = cw;
    this.a.y = randomIntFromInterval(0, cw);
    this.b.y = randomIntFromInterval(0, cw);
  }
  this.va = randomIntFromInterval(25, 100) / 100;
  this.vb = randomIntFromInterval(25, 100) / 100;

  this.draw = function() {
    ctx.strokeStyle = "#ccc";
    ctx.beginPath();
    ctx.moveTo(this.a.x, this.a.y);
    ctx.lineTo(this.b.x, this.b.y);
    ctx.stroke();
  }

  this.update = function() {
    if (this.flag == "v") {
      this.a.x += this.va;
      this.b.x += this.vb;
    } else if (flag == "h") {
      this.a.y += this.va;
      this.b.y += this.vb;
    }

    this.edges();
  }

  this.edges = function() {
    if (this.flag == "v") {
      if (this.a.x < 0 || this.a.x > cw) {
        this.va *= -1;
      }
      if (this.b.x < 0 || this.b.x > cw) {
        this.vb *= -1;
      }
    } else if (flag == "h") {
      if (this.a.y < 0 || this.a.y > ch) {
        this.va *= -1;
      }
      if (this.b.y < 0 || this.b.y > ch) {
        this.vb *= -1;
      }
    }
  }

}

for (var i = 0; i < linesNum; i++) {
  var flag = i % 2 == 0 ? "h" : "v";
  var l = new Line(flag);
  linesRy.push(l);
}

function Draw() {
  requestId = window.requestAnimationFrame(Draw);
  ctx.clearRect(0, 0, cw, ch);

  for (var i = 0; i < linesRy.length; i++) {
    var l = linesRy[i];
    l.draw();
    l.update();
  }
  for (var i = 0; i < linesRy.length; i++) {
    var l = linesRy[i];
    for (var j = i + 1; j < linesRy.length; j++) {
      var l1 = linesRy[j]
      Intersect2lines(l, l1);
    }
  }
}

function Init() {
  linesRy.length = 0;
  for (var i = 0; i < linesNum; i++) {
    var flag = i % 2 == 0 ? "h" : "v";
    var l = new Line(flag);
    linesRy.push(l);
  }

  if (requestId) {
    window.cancelAnimationFrame(requestId);
    requestId = null;
  }

  cw = canvas.width = window.innerWidth,
    cx = cw / 2;
  ch = canvas.height = window.innerHeight,
    cy = ch / 2;

  Draw();
};

setTimeout(function() {
  Init();

  addEventListener('resize', Init, false);
}, 15);

function Intersect2lines(l1, l2) {
  var p1 = l1.a,
    p2 = l1.b,
    p3 = l2.a,
    p4 = l2.b;
  var denominator = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);
  var ua = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denominator;
  var ub = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denominator;
  var x = p1.x + ua * (p2.x - p1.x);
  var y = p1.y + ua * (p2.y - p1.y);
  if (ua > 0 && ub > 0) {
    markPoint({
      x: x,
      y: y
    })
  }
}

function markPoint(p) {
  ctx.beginPath();
  ctx.arc(p.x, p.y, 2, 0, 2 * Math.PI);
  ctx.fill();
}

function randomIntFromInterval(mn, mx) {
  return ~~(Math.random() * (mx - mn + 1) + mn);
}

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/canvasline.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</script>
</html>
